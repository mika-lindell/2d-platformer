this.game={init:function(){return gfx.init()?gfx.load(function(){return game.reset()}):(alert("Sorry, no canvas"),void 0)},stop:function(){return this.running=!1},start:function(){return this.running=!0},reset:function(){return this.player=new Player,this.level=new Level(levels[0],this),keys.reset(),this.running?void 0:(this.start(),this.tick())},setPlayer:function(t,e,r){return this.player.level=r,this.player.x=t,this.player.y=e},tick:function(){return this.running?(gfx.clear(),this.update(),this.render(),setTimeout(function(){return game.tick()},33)):void 0},update:function(){return this.level.update(),this.player.update()},render:function(){var t,e,r,i,n,s;return gfx.ctx.save(),gfx.ctx.scale(1.3,1.3),i=this.level.w*gfx.tileW,r=i/2,s=i/4.4+r,n=this.player.x>r?-this.player.x+r:0,this.player.x>s&&(n=-(i/4.4)),gfx.ctx.translate(n,-this.player.y+gfx.h/4),this.level.render(gfx),this.player.render(gfx),t=1-100*(this.player.x/gfx.w),e=1-100*(this.player.y/gfx.h),gfx.ctx.canvas.style.backgroundPosition=""+t+"px "+e+"px",gfx.ctx.restore()}};